@model List<SportStatistics.Models.ViewModels.Progress>
@{
    ViewBag.Title = "Standings";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var grid = new WebGrid(source: Model, defaultSort: "Rank", rowsPerPage: 20, ajaxUpdateContainerId: "webGrid");
    grid.SortDirection = SortDirection.Descending;
    int rank = 0;
}

<section>
    <h1>Progress</h1>
    <div>
        <div class="form-group">
            @Html.LabelFor(model => model[0].Season, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EnumDropDownListFor(model => model[0].Season, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model[0].Season, "", new { @class = "text-danger" })
            </div>
        </div>
        <button>Ok</button>
    </div>
    <div>
        <label>Standings:</label>
        @Html.ActionLink("Overall", "Standings", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
        @Html.ActionLink("Home", "StandingsHome", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
        @Html.ActionLink("Away", "StandingsAway", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
    </div>
    <div>
        <label>Progress:</label>
        @Html.ActionLink("Overall", "Progress", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
        @Html.ActionLink("Home", "ProgressHome", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
        @Html.ActionLink("Away", "ProgressAway", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
    </div>
    <div>
        <label>This season:</label>
        @Html.ActionLink("Scorers", "Scorers", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
        @Html.ActionLink("Result", "Result", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
    </div>
    <div>
        <label>Archive:</label>
        @Html.ActionLink("Winners", "Winners", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
        @Html.ActionLink("Scorers", "ArchScorers", "Home", routeValues: new { fedSeason = Model[0].FederationSeasonId }, htmlAttributes: null)
    </div>
    <div id="webGrid">
        @grid.GetHtml(
    tableStyle: "myTable",
    headerStyle: "myTableHeader",
    footerStyle: "myTableFooter",
    columns: grid.Columns(
            grid.Column(header: "Rank", format: @<text>@{rank++;} @rank </text>),
            grid.Column("Team", format:
            @<text>
                @{string name = item.NameTeam; }
                @Html.ActionLink(name, "Team", "Home", routeValues:
                            new { fedSeason = item.FederationSeasonId, TeamId = item.TeamId },
                            htmlAttributes: null)
            </text>),            
            grid.Column(header: "Form", format:
            @<text>
                @foreach (var it in item.Form)
                {
                    if (it.WinDL.ToString() == "Win")
                    {
                        @Html.ActionLink("W", "Match", "Home", new { MatchId = @it.MatchId }, htmlAttributes: new { @title = @it.Result, @class = "link-W" })
                    }
                    else
                    if (it.WinDL.ToString() == "Draw")
                    {
                        @Html.ActionLink("D", "Match", "Home", new { MatchId = @it.MatchId }, htmlAttributes: new { @title = @it.Result, @class = "link-D" })              
                    }
                    else
                    {
                        @Html.ActionLink("L", "Match", "Home", new { MatchId = @it.MatchId }, htmlAttributes: new { @title = @it.Result, @class = "link-L" })
                    }
                }
                <div class="count">
                    @item.Count
                </div>
            </text>
            )
        )
    )
    </div>
</section>


